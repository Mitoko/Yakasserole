{% extends "app/layout.html" %}

{% block content %}
<h2>{{ title }}</h2>
<div class="row">
    <div class="col-md-8">
        <section id="loginForm">
            <form action="." method="post" class="form-horizontal">
                {% csrf_token %}
                <h4>Use a Google account to log in.</h4>
                 <hr />

                        <head>
                        <meta name="google-signin-client_id" content="891756079590-98iqb0gt1v59uotq5190dpkd49uq2aah.apps.googleusercontent.com">
                        </head>
                        <body>
                        <div id="my-signin2"></div>
                        <script>
                            function onSuccess(googleUser)
                            {
                                var auth2 = gapi.auth2.getAuthInstance();
                                auth2.signOut().then(function () {
                                console.log('User signed out.');
                            });
                                console.log('Logged in as: ' + googleUser.getBasicProfile().getName());
                                window.location.href = '/accounts/google/login/?process=loginx';
                            }

                            function onFailure(error) {
                            console.log(error);
                            }
                        
                            function renderButton() {
                            gapi.signin2.render('my-signin2', {
                                'scope': 'profile email',
                                'width': 240,
                                'height': 50,
                                'longtitle': true,
                                'theme': 'dark',
                                'onsuccess': onSuccess,
                                'onfailure': onFailure
                            });
                            }
                        </script>
                        <script src="https://apis.google.com/js/platform.js?onload=renderButton" async defer></script>
                        </body>
                        
                <h4>Use a local account to log in.</h4>
                <hr />
                <div class="form-group">
                    <label for="id_username" class="col-md-2 control-label">User name</label>
                    <div class="col-md-10">
                        {{ form.username }}
                    </div>
                </div>
                <div class="form-group">
                    <label for="id_password" class="col-md-2 control-label">Password</label>
                    <div class="col-md-10">
                        {{ form.password }}
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-offset-2 col-md-10">
                        <input type="hidden" name="next" value="/" />
                        <input type="submit" value="Log in" class="btn btn-default" />
                    </div>
                </div>
                {% if form.errors %}
                <p class="validation-summary-errors">Please enter a correct user name and password.</p>
                {% endif %}
            </form>
        </section>
    </div>
    <div class="col-md-4">
        <section id="socialLoginForm"></section>
    </div>
</div>

{% endblock %}


{% block scripts %}

    {% load staticfiles %}
<script src="{% static 'app/scripts/jquery.validate.min.js' %}"></script>

{% endblock %}
